<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script>
    // Get the current path and query string
    const path = window.location.pathname;
    const search = window.location.search;
    
    // Save it to session storage
    sessionStorage.setItem('redirect_path', path + search);
    
    // Redirect to the main page while preserving the base path
    const basePath = path.split('/').slice(0, -1).join('/');
    window.location.replace(
      basePath + '/' + 
      (basePath ? '?' : '') + 
      (basePath ? 'p=' + encodeURIComponent(path + search) : '')
    );
  </script>
</head>
<body>
  Redirecting...
</body>
</html> 